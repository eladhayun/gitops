apiVersion: networking.k8s.io/v1
kind: Ingress
metadata:
  name: ids-backend
  annotations:
    nginx.ingress.kubernetes.io/use-forwarded-headers: "true"
    nginx.ingress.kubernetes.io/compute-full-forwarded-for: "true"
    # Disable caching for static files to ensure latest frontend changes are served
    nginx.ingress.kubernetes.io/configuration-snippet: |
      location ~* \.(js|css|html)$ {
        add_header Cache-Control "no-cache, no-store, must-revalidate, proxy-revalidate";
        add_header Pragma "no-cache";
        add_header Expires "0";
        add_header X-Cache-Status "BYPASS";
      }
spec:
  ingressClassName: nginx
  rules:
  - host: ids.jshipster.io
    http:
      paths:
      - path: /
        pathType: Prefix
        backend:
          service:
            name: ids-backend
            port:
              number: 8080
